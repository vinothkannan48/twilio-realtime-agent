# ---------------------------------------------------------------------
# ğŸ Base image
# Use a lightweight Python image with Debian
# ---------------------------------------------------------------------
FROM python:3.11-slim

# ---------------------------------------------------------------------
# ğŸ§ Install system dependencies (FFmpeg for audio)
# ---------------------------------------------------------------------
RUN apt-get update && \
    apt-get install -y ffmpeg && \
    rm -rf /var/lib/apt/lists/*

# ---------------------------------------------------------------------
# ğŸ“ Set working directory inside container
# ---------------------------------------------------------------------
WORKDIR /app

# ---------------------------------------------------------------------
# ğŸ“¦ Copy requirements and install Python dependencies
# ---------------------------------------------------------------------
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# ---------------------------------------------------------------------
# ğŸ“‚ Copy the rest of your application files
# ---------------------------------------------------------------------
COPY . .

# ---------------------------------------------------------------------
# ğŸ”¥ Expose port (Render automatically maps $PORT)
# ---------------------------------------------------------------------
EXPOSE 10000

# ---------------------------------------------------------------------
# ğŸš€ Run your Flask realtime app
# ---------------------------------------------------------------------
CMD ["python", "realtime_agent.py"]